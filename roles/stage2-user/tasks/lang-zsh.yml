---
- tags:
    - dotfiles
    - shell
    - zsh
  block:
    - name: copy zsh libraries
      copy:
        src: '.local/share/zsh/'
        dest: '{{ lookup("env", "HOME") }}/.local/share/zsh/'
      tags:
        - zshrc

    - name: copy zsh config
      copy:
        src: 'zshrc'
        dest: '{{ lookup("env", "HOME") }}/.zshrc'
      tags:
        - zshrc

    - name: create zsh directories
      file:
        name: '{{ lookup("env", "HOME") }}/{{ item }}'
        state: directory
      loop:
        - .cache/zsh
        - .config/zsh

    - name: touch zsh local configuration directory
      copy:
        src: '/dev/null'
        dest: '{{ lookup("env", "HOME") }}/.config/zsh/zshrc'
        force: false

    - name: set shell to zsh
      user:
        name: '{{ lookup("env", "USER") }}'
        shell: '/bin/zsh'
      become: 'yes'
