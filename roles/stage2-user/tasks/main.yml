---
- tags:
    - stage2
    - stage2-user
  block:
    - import_tasks: lang-python.yml
    - import_tasks: lang-zsh.yml
    - import_tasks: tool-git.yml
    - import_tasks: tool-micro.yml
    - import_tasks: tool-ssh.yml

    - name: configure dotfiles
      copy:
        src: '{{ item }}'
        dest: '{{ lookup("env", "HOME") }}/.{{ item }}'
      with_items:
        - ackrc
        - htoprc
        - inputrc
        - multitailrc
        - tmux.conf
      tags:
        - dotfiles

    - name: install executables and scripts
      copy:
        src: 'local/bin/'
        dest: '{{ lookup("env", "HOME") }}/.local/bin'
        mode: '0755'
      tags:
        - bin
        - bindir
        - ansible
        - micro

    - name: create development directories
      file:
        name: '{{ lookup("env", "HOME") }}/{{ item }}'
        state: directory
      with_items:
        - 'Development'
        - 'Development/github.com/borntyping'
        - 'Development/github.com/borntyping-sandbox'
        - 'Development/gitlab.com/borntyping'

    - meta: flush_handlers
