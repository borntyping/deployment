---
- become: true
  tags:
    - 'stage1'
    - 'stage1-base'
  block:
    - name: 'install apt packages'
      ansible.builtin.apt:
        state: 'latest'
        pkg:
          - 'ack'
          - 'asciinema'
          - 'bat'
          - 'black'
          - 'cargo'
          - 'colordiff'
          - 'composer'
          - 'curl'
          - 'direnv'
          - 'docker-compose'
          - 'exa'
          - 'fd-find'
          - 'fd-find'
          - 'fzf'
          - 'git-lfs'
          - 'git'
          - 'golang'
          - 'htop'
          - 'httpie'
          - 'hub'
          - 'jq'
          - 'micro'
          - 'mlocate'
          - 'mypy'
          - 'nano'
          - 'php-cli'
          - 'php-curl'
          - 'php-mbstring'
          - 'php-xsl'
          - 'pipenv'
          - 'pipx'
          - 'podman-docker'
          - 'python3-dev'
          - 'python3-pip'
          - 'python3-poetry'
          - 'python3-pytest'
          - 'python3-wheel'
          - 'python3'
          - 'ripgrep'
          - 'rustc'
          - 'shellcheck'
          - 'tree'
          - 'wl-clipboard'
          - 'zoxide'
          - 'zsh-autosuggestions'
          - 'zsh-syntax-highlighting'
          - 'zsh'
      tags:
        - 'bin'
        - 'apt'
        - 'docker'
        - 'git'
        - 'lib'
        - 'php'
        - 'python'
        - 'rust'
        - 'zsh'

    - name: 'install snap packages'
      tags: ['git', 'snap']
      community.general.snap:
        name:
          - difftastic

    - name: 'install snap packages with --classic'
      tags: ['python', 'snap']
      community.general.snap:
        name: '{{ item }}'
        classic: true
      loop:
        - 'pycharm-professional'

    - name: 'configure sudo'
      ansible.builtin.copy:
        src: 'etc/sudoers.d/sam'
        dest: '/etc/sudoers.d/sam'
      tags:
        - docker
        - sudo
        - sudoers
